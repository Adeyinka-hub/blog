<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.0">Jekyll</generator><link href="https://rohanrajpal.github.io/blog/feed.xml" rel="self" type="application/atom+xml" /><link href="https://rohanrajpal.github.io/blog/" rel="alternate" type="text/html" /><updated>2020-06-12T13:19:57-05:00</updated><id>https://rohanrajpal.github.io/blog/feed.xml</id><title type="html">Rohan Rajpal</title><subtitle>A minimal site where I write about my journey in the tech world.</subtitle><entry><title type="html">Selective network routing/Split Tunneling via VPN</title><link href="https://rohanrajpal.github.io/blog/2020/04/25/Selective-network-routing.html" rel="alternate" type="text/html" title="Selective network routing/Split Tunneling via VPN" /><published>2020-04-25T02:30:00-05:00</published><updated>2020-04-25T02:30:00-05:00</updated><id>https://rohanrajpal.github.io/blog/2020/04/25/Selective-network-routing</id><content type="html" xml:base="https://rohanrajpal.github.io/blog/2020/04/25/Selective-network-routing.html">&lt;p&gt;Everyone is working from home and for me it is remotely working on the servers in my college. I can only connect to them via a VPN, but that slows down my browsing and video conferencing.&lt;/p&gt;

&lt;p&gt;I was trying to figure out a way to use VPN specifically for the server in college and let the other traffic move normally. That’s when I came across &lt;a href=&quot;https://github.com/adrienverge/openfortivpn/issues/371#issuecomment-437783005&quot;&gt;this solution&lt;/a&gt;. In this blog I’ll explain the solution step by step.&lt;/p&gt;

&lt;p&gt;tl,dr : &lt;strong&gt;At the end of this blog you’ll be able to select which website or IP addresses you want to route through the VPN.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Requirements:&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Ubuntu (Should work on other Linux distros as well)
    &lt;ul&gt;
      &lt;li&gt;If you are using windows, this method works with Windows Subsystem for Linux. Do &lt;a href=&quot;https://github.com/microsoft/WSL/issues/4201#issuecomment-539034470&quot;&gt;ensure that you have WSL2&lt;/a&gt; before proceeding.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/adrienverge/openfortivpn&quot;&gt;Openfortivpn&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Ensure that you can connect to a VPN using it.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;steps-for-selective-routing&quot;&gt;Steps for selective routing&lt;/h2&gt;

&lt;h3 id=&quot;1-vpn-configuration-file&quot;&gt;1. VPN configuration file&lt;/h3&gt;

&lt;p&gt;This file tells our VPN client the configuration of our VPN.&lt;/p&gt;

&lt;p&gt;Save the below config file as vpn-config.conf anywhere on your computer&lt;/p&gt;

&lt;noscript&gt;&lt;pre&gt;400: Invalid request&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/b443e20658cdf3e762a4e9df1a6e31bb.js?file=vpn-config.conf&quot;&gt; &lt;/script&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;set-routes = 0&lt;/code&gt; specifies to not make any routes through the VPN, now we will whitelist the websites to use through the VPN.&lt;/p&gt;

&lt;h3 id=&quot;2-setup-the-ppp-script&quot;&gt;2. Setup the PPP script&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;What’s PPP?&lt;/strong&gt;: PPP is Point to Point protocol. Linux uses this protocol to communicate over TCP/IP to your Internet Provider.&lt;a href=&quot;https://docstore.mik.ua/orelly/linux/run/ch15_02.htm&quot;&gt;read more&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We are now going to write a script that will whitelist specific domains to pass through the VPN.&lt;/p&gt;

&lt;p&gt;Use the following commands to create the script&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo touch&lt;/span&gt; /etc/ppp/ip-up.d/fortivpn
&lt;span class=&quot;nb&quot;&gt;sudo chmod &lt;/span&gt;a+x /etc/ppp/ip-up.d/fortivpn
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;What’s pppd?&lt;/strong&gt; The PPP Daemon (pppd) is a freely available implementation of the Point-to-Point Protocol (PPP) that runs on many Unix systems. &lt;a href=&quot;docstore.mik.ua/orelly/networking_2ndEd/tcp/appa_02.htm&quot;&gt;read more&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;What’s ip-up?&lt;/strong&gt; /etc/ppp/ip-up is a shell script executed by pppd when the link/internet comes up. &lt;a href=&quot;docstore.mik.ua/orelly/networking_2ndEd/tcp/appa_02.htm&quot;&gt;read more&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Edit the above script with your favourite editor, it shall look like:&lt;/p&gt;

&lt;noscript&gt;&lt;pre&gt;400: Invalid request&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/b443e20658cdf3e762a4e9df1a6e31bb.js?file=my-pppscript.sh&quot;&gt; &lt;/script&gt;

&lt;p&gt;Now add the ips and domains you want to access through the VPN.&lt;/p&gt;

&lt;h3 id=&quot;3-run-the-vpn&quot;&gt;3. Run the VPN&lt;/h3&gt;

&lt;p&gt;The following command should connect you to your VPN now.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;openfortivpn &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; vpn-config.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Below you can see the routes added for the ip addresses. ppp0 is the vpn interface and enp2s0 is the ethernet.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rohan@rohan-laptop ~&amp;gt; route                                                                  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;base&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         _gateway        0.0.0.0         UG    100    0        0 enp2s0
one.one.one.one 0.0.0.0         255.255.255.255 UH    0      0        0 ppp0
103.25.231.4    0.0.0.0         255.255.255.255 UH    0      0        0 ppp0
link-local      0.0.0.0         255.255.0.0     U     1000   0        0 enp2s0
192.168.0.0     0.0.0.0         255.255.255.0   U     100    0        0 enp2s0
192.168.2.217   0.0.0.0         255.255.255.255 UH    0      0        0 ppp0
192.168.29.151  0.0.0.0         255.255.255.255 UH    0      0        0 ppp0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;That’s about it!&lt;/strong&gt; You can now work on your server and enjoy fast internet along :)&lt;/p&gt;

&lt;h3 id=&quot;bonus-automatically-start-vpn-on-boot&quot;&gt;Bonus: Automatically start VPN on boot&lt;/h3&gt;

&lt;p&gt;It’s quite irritating to log into the VPN everytime before starting work. So I created a system service to automatically connect to VPN on boot.
&lt;em&gt;Disclaimer:&lt;/em&gt; this will not work with WSL2&lt;/p&gt;

&lt;p&gt;Run these commands to setup the service&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo touch&lt;/span&gt; /etc/systemd/system/openfortivpn.service
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open it with your favorite editor and enter this configuration. Thanks to &lt;a href=&quot;https://github.com/adrienverge/openfortivpn/issues/371#issuecomment-620720265&quot;&gt;DimitriPapadopoulos&lt;/a&gt; for helping me with it.&lt;/p&gt;

&lt;noscript&gt;&lt;pre&gt;400: Invalid request&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/b443e20658cdf3e762a4e9df1a6e31bb.js?file=openfortivpn.service&quot;&gt; &lt;/script&gt;

&lt;p&gt;To start this service, simply run&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;openfortivpn
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl start openfortivpn
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To check if it is running&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rohan@rohan-laptop ~&amp;gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl status openfortivpn
● openfortivpn.service - OpenFortiVPN
   Loaded: loaded &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;/etc/systemd/system/openfortivpn.service&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; enabled&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; vendor preset: enabled&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
   Active: active &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;running&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; since Sat 2020-04-25 13:22:26 IST&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 3h 43min ago
     Docs: man:openfortivpn&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
 Main PID: 1851 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;openfortivpn&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    Tasks: 6 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;limit: 4915&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
   CGroup: /system.slice/openfortivpn.service
           ├─1851 /usr/bin/openfortivpn &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; /home/rohan/Documents/vpn-configs/iiitd.conf
           └─1852 /usr/sbin/pppd 38400 :1.1.1.1 noipdefault noaccomp noauth default-asyncmap nopcomp

Apr 25 13:22:26 rohan-laptop systemd[1]: Started OpenFortiVPN.
Apr 25 13:22:26 rohan-laptop pppd[1852]: pppd 2.4.7 started by root, uid 0
Apr 25 13:22:26 rohan-laptop pppd[1852]: Using interface ppp0
Apr 25 13:22:26 rohan-laptop pppd[1852]: Connect: ppp0 &amp;lt;&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; /dev/pts/0
Apr 25 13:22:27 rohan-laptop pppd[1852]: &lt;span class=&quot;nb&quot;&gt;local  &lt;/span&gt;IP address 10.212.134.101
Apr 25 13:22:27 rohan-laptop pppd[1852]: remote IP address 1.1.1.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thanks for reading :) If this did help you, feels free to like, comment and share this blog.&lt;/p&gt;

&lt;h4 id=&quot;references&quot;&gt;References&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/adrienverge/openfortivpn/wiki&quot;&gt;openfortivpn&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docstore.mik.ua/orelly/linux/run/ch15_02.htm&quot;&gt;ppp&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docstore.mik.ua/orelly/networking_2ndEd/tcp/appa_02.htm&quot;&gt;ppp daemon&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">Everyone is working from home and for me it is remotely working on the servers in my college. I can only connect to them via a VPN, but that slows down my browsing and video conferencing.</summary></entry><entry><title type="html">DMRC Connect</title><link href="https://rohanrajpal.github.io/blog/2019/11/15/DMRC-Connect.html" rel="alternate" type="text/html" title="DMRC Connect" /><published>2019-11-15T04:30:00-06:00</published><updated>2019-11-15T04:30:00-06:00</updated><id>https://rohanrajpal.github.io/blog/2019/11/15/DMRC-Connect</id><content type="html" xml:base="https://rohanrajpal.github.io/blog/2019/11/15/DMRC-Connect.html">&lt;p&gt;From July-November 2019, my team and I worked on an application. This project was a part of the course: CSE501-Designing Human Centered Systems.&lt;/p&gt;

&lt;div class=&quot;container&quot;&gt;
  &lt;img class=&quot;logo&quot; src=&quot;/blog/images/DMRC/logo.png&quot; /&gt;  &lt;br /&gt;
  DMRC-Connect
&lt;/div&gt;

&lt;h2 id=&quot;motivation&quot;&gt;Motivation&lt;/h2&gt;
&lt;p&gt;The metro has been the backbone of transport in Delhi NCR, with daily ridership in excess of 5 million riders. It is famous for providing world-class transit with reach to almost all corners of the city with a reputation of punctuality and quality. At the core of these values lie the vision and mission of DMRC that aim to have the best possible experience for riders from all walks of life and have that with trust and reliability.&lt;/p&gt;

&lt;p&gt;DMRC has always tried to take an extra step ahead to connect better with the riders and provide them with the best experience. Social media plays an important role in their endeavour to build this connection, with DMRC being active on all social media platforms and constantly engaging with the riders.&lt;/p&gt;
&lt;div class=&quot;container&quot;&gt;
  &lt;img class=&quot;tweets&quot; src=&quot;/blog/images/DMRC/6_q_r.png&quot; /&gt;
  &lt;img class=&quot;tweets&quot; src=&quot;/blog/images/DMRC/7_q_r.png&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;However, the question remains, do all Delhi metro users really use Twitter? While DMRC is putting in full efforts to relay this information to riders, is it really reaching the intended audience? Are complaints being solved fast enough for affected riders to benefit from it? Do all complaints be it from Twitter, or from their helplines come with complete information?&lt;/p&gt;

&lt;p&gt;Unfortunately, a general trend after rolling out small surveys and talking to users at various metro stations and in and around Delhi, we got to know that this wasn’t the case. Not only was social media outreach restricted to those who followed DMRC on Twitter, but this sort of engagement also was never advertised or encouraged by any official metro source.&lt;/p&gt;

&lt;h2 id=&quot;problem-statement&quot;&gt;Problem Statement&lt;/h2&gt;

&lt;h3 id=&quot;what-does-dmrc-connect-do&quot;&gt;What does DMRC Connect do?&lt;/h3&gt;
&lt;p&gt;We create an application that facilitates interaction between DMRC officials and DMRC users and bridges the gap created earlier due to less outreach.&lt;/p&gt;

&lt;h3 id=&quot;what-are-the-features&quot;&gt;What are the features?&lt;/h3&gt;

&lt;p&gt;Sticking to the theme of the user and official interaction, the features of DMRC Connect are:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Announcements&lt;/li&gt;
  &lt;li&gt;Complaint registration&lt;/li&gt;
  &lt;li&gt;Complaint tracking&lt;/li&gt;
  &lt;li&gt;Quick access helplines&lt;/li&gt;
  &lt;li&gt;FAQs&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;the-design-process&quot;&gt;The Design Process&lt;/h2&gt;

&lt;h3 id=&quot;contextual-enquiry&quot;&gt;Contextual Enquiry&lt;/h3&gt;
&lt;p&gt;To help understand the problem better and get the user’s perspective on it, we set out to interview general metro users about their usage patterns and general behaviour when it comes to complaints. Our aim was to understand the kind of behaviour users have while interacting with current systems and understand whether the current modes of communication were effective or not.&lt;/p&gt;

&lt;p&gt;The target audience was any general rider of the metro who was not a minor, and questions ranged from general ones that helped us understand their general behaviour towards tackling issues they faced, to more specific ones that asked the user about their experiences specific to the metro.&lt;/p&gt;

&lt;p&gt;A few of the questions were:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;How often do you face “issues” or “problems” in services offered to you? It could be in an app, it could be during transportation like railway/metro/bus, it could be college or conferences?&lt;/li&gt;
  &lt;li&gt;Have you ever come across official announcements from Delhi metro? Where did you hear about them?&lt;/li&gt;
  &lt;li&gt;What problems have you faced in the metro till now? Can you describe any one instance?&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/blog/images/DMRC/affinity_diagram.jpg&quot; alt=&quot;lofi&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;lo-fidelity-prototypes&quot;&gt;Lo-Fidelity Prototypes&lt;/h3&gt;

&lt;p&gt;Based on the affinity mapping, we came up with the initial paper prototypes of our application and took them to users for testing through Task Analysis.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/images/DMRC/lofi-prototypes.jpg&quot; alt=&quot;lofi&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Key Findings from v0 and v1:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Users went to “Help Centre” to do most tasks related to getting help from DMRC, very few users went to the actual intended target location.&lt;/li&gt;
  &lt;li&gt;“Contact Us” seemed to be a way to contact the developers rather than DMRC helplines.&lt;/li&gt;
  &lt;li&gt;Some people went to the complaint section in v2 to find women’s helpline.&lt;/li&gt;
  &lt;li&gt;In helplines, instead of direct calls, users wanted phone numbers to pop-up instead.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;hi-fidelity-prototypes&quot;&gt;Hi-Fidelity Prototypes&lt;/h3&gt;

&lt;p&gt;After 3 iterations of user testing through Task analysis on the lo-fidelity prototypes, we arrived at the first version of the hi-fidelity prototype and conducted testing on it.&lt;/p&gt;

&lt;div class=&quot;container&quot;&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/hi-fed/1.png&quot; /&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/hi-fed/2.png&quot; /&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/hi-fed/3.png&quot; /&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/hi-fed/4.png&quot; /&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/hi-fed/5.png&quot; /&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/hi-fed/6.png&quot; /&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/hi-fed/7.png&quot; /&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/hi-fed/8.png&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;One of the major changes after user testing on the Hi-Fidelity prototype was to change the colour scheme to one with less hue, i.e primarily blue-based instead of red-based, and to shift from side navigation to bottom navigation instead.&lt;/p&gt;

&lt;h3 id=&quot;final-color-scheme-and-typography&quot;&gt;Final Color Scheme and Typography&lt;/h3&gt;

&lt;p&gt;The typography used throughout was Roboto, as it is standardly used by Google and the colour scheme is mentioned below.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;colorscheme&quot; src=&quot;/blog/images/DMRC/color-scheme.jpg&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;final-application&quot;&gt;Final Application&lt;/h3&gt;

&lt;p&gt;The final application, made with help of Android Studio and a Flask backend, was made live on the play store for users to use. The application is available &lt;a href=&quot;https://bit.ly/2NVhIEV&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;container&quot;&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/final-app/1.webp&quot; /&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/final-app/2.webp&quot; /&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/final-app/3.webp&quot; /&gt;
  &lt;br /&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/final-app/4.webp&quot; /&gt;
  &lt;img class=&quot;final-app&quot; src=&quot;/blog/images/DMRC/final-app/5.webp&quot; /&gt;
&lt;/div&gt;

&lt;h2 id=&quot;building-better-interfaces-bbi2019&quot;&gt;Building Better Interfaces #BBI2019&lt;/h2&gt;

&lt;div class=&quot;container&quot;&gt;
  &lt;img class=&quot;group-pic&quot; src=&quot;/blog/images/DMRC/BBI/them-bois.jpg&quot; /&gt;
  
  &lt;img class=&quot;station&quot; src=&quot;/blog/images/DMRC/BBI/bbi-station.jpg&quot; /&gt;
  &lt;img class=&quot;prop&quot; src=&quot;/blog/images/DMRC/BBI/bbi-mainprop.jpg&quot; /&gt;

  &lt;img class=&quot;director&quot; src=&quot;/blog/images/DMRC/BBI/director.jpg&quot; /&gt;

  &lt;img class=&quot;with-pk&quot; src=&quot;/blog/images/DMRC/BBI/with-pk.jpg&quot; /&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html">From July-November 2019, my team and I worked on an application. This project was a part of the course: CSE501-Designing Human Centered Systems.</summary></entry><entry><title type="html">My GSoC experience with VideoLAN</title><link href="https://rohanrajpal.github.io/blog/gsoc/2019/08/12/GSoC-with-VideoLAN.html" rel="alternate" type="text/html" title="My GSoC experience with VideoLAN" /><published>2019-08-12T02:30:00-05:00</published><updated>2019-08-12T02:30:00-05:00</updated><id>https://rohanrajpal.github.io/blog/gsoc/2019/08/12/GSoC-with-VideoLAN</id><content type="html" xml:base="https://rohanrajpal.github.io/blog/gsoc/2019/08/12/GSoC-with-VideoLAN.html">&lt;h2 id=&quot;introduction-&quot;&gt;Introduction &lt;img src=&quot;/blog/images/videoLANLogo.png&quot; alt=&quot;videolan&quot; /&gt;&lt;/h2&gt;
&lt;p&gt;This summer, I participated as a &lt;a href=&quot;https://summerofcode.withgoogle.com/&quot;&gt;Google Summer of Code&lt;/a&gt; student under VideoLAN. GSoC is undoubtedly one of the best summer programs out there. From designing interfaces and interactions to writing production-level code, I’ve learned tons of exciting stuff!&lt;br /&gt;
I was blessed to have great mentors and learned a lot about the open-source community.&lt;/p&gt;

&lt;h3 id=&quot;project-and-proposal&quot;&gt;Project and Proposal&lt;/h3&gt;

&lt;p&gt;The VLC media player has an Editor which enables you to customize the player controlbar UI; you can arrange buttons like the play button as per your liking. My main task was to implement this Editor functionality in the new UI for VLC.&lt;/p&gt;

&lt;p&gt;You can have a look at my &lt;a href=&quot;https://summerofcode.withgoogle.com/projects/#5519642150305792&quot;&gt;project page&lt;/a&gt; on the GSoC website. Feel free to check out my &lt;a href=&quot;https://docs.google.com/document/d/1h6ABFFuIs7gJh4_zwkN23aYkeuDNsn3GkMUPgzeB7OI/edit&quot;&gt;proposal.&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;patches&quot;&gt;Patches&lt;/h3&gt;

&lt;p&gt;I made an account on &lt;a href=&quot;code.videolan.org&quot;&gt;VideoLAN’s Gitlab&lt;/a&gt; and worked on &lt;a href=&quot;https://code.videolan.org/rohanrajpal/vlc-qml&quot;&gt;this&lt;/a&gt; repository. I used to push all my commits there to get them reviewed. Then made patches out of them and sent commits to the VLC-developer mailing list. A few other people would then review the patches. Finally, after making the required changes, the patches would get merged.&lt;/p&gt;

&lt;p&gt;&lt;span style=&quot;font-size: 14pt&quot;&gt;
&lt;a href=&quot;https://patches.videolan.org/project/vlc-devel/list/?submitter=908&amp;amp;state=*&quot;&gt;Here&lt;/a&gt; is a list of all my patches.
&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;the-team&quot;&gt;The Team&lt;/h2&gt;

&lt;p&gt;A big thanks to the team and my mentors who helped me with my endless doubts!&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://code.videolan.org/AbelTesfaye&quot;&gt;Abel Tesfaye&lt;/a&gt; (GSoC Student)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mail.google.com/mail/u/0/?view=cm&amp;amp;fs=1&amp;amp;tf=1&amp;amp;source=mailto&amp;amp;to=kohli.sagar2@gmail.com&quot;&gt;Sagar Kohli&lt;/a&gt; (GSoC Student)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://code.videolan.org/jbk&quot;&gt;Jean-Baptiste Kempf&lt;/a&gt; (VideoLAN president)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://code.videolan.org/chub&quot;&gt;Pierre Lamot&lt;/a&gt; (Software engineer at Videolabs)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://code.videolan.org/alexandre-janniaux&quot;&gt;Alexandre Janniaux&lt;/a&gt; (Software engineer at Videolabs)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://code.videolan.org/rohanrajpal&quot;&gt;Rohan Rajpal&lt;/a&gt; (Me)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Our communication was mainly via emails and #vlc-gsoc on IRC.&lt;/p&gt;

&lt;h2 id=&quot;the-project&quot;&gt;The Project&lt;/h2&gt;

&lt;h3 id=&quot;what-work-was-done&quot;&gt;What work was done?&lt;/h3&gt;

&lt;p&gt;I had made some contributions towards the player controlbar and further wanted to work on it. Jean then suggested I should work on the Editor. Making the Editor was a big task to do, we divided it into the following parts:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Create a model of all the buttons/widgets on the player ControlBar.&lt;/li&gt;
  &lt;li&gt;Load the player buttons from the model instead of hardcoding them.&lt;/li&gt;
  &lt;li&gt;Make a simple drag and drop interface which changes the model by dragging and dropping and updates the config&lt;/li&gt;
  &lt;li&gt;Make a View from which you can drag and add buttons to the player ControlBar.&lt;/li&gt;
  &lt;li&gt;Add profiles combobox via which you can load, make and delete configurations for the player.&lt;/li&gt;
  &lt;li&gt;Populate the miniplayer from the model&lt;/li&gt;
  &lt;li&gt;Make miniplayer editable and add a tab for it in the editor&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I have also worked on a few other things&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Add all the missing buttons and widgets. I’ve added the following:
    &lt;ul&gt;
      &lt;li&gt;Volume Widget&lt;br /&gt;
 &lt;img src=&quot;/blog/images/volumeDemo.gif&quot; alt=&quot;volume&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Teletext Widget&lt;br /&gt;
 &lt;img src=&quot;/blog/images/teletextPopup.png&quot; alt=&quot;teletext&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Aspect Ratio widget&lt;br /&gt;
 &lt;img src=&quot;/blog/images/aspectRatioWidget.png&quot; alt=&quot;aspect&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Record button&lt;/li&gt;
      &lt;li&gt;Spacer widget&lt;/li&gt;
      &lt;li&gt;Extended Spacer widget&lt;/li&gt;
      &lt;li&gt;FullScreen button&lt;/li&gt;
      &lt;li&gt;Record button&lt;/li&gt;
      &lt;li&gt;AB Loop button&lt;/li&gt;
      &lt;li&gt;Snapshot button&lt;/li&gt;
      &lt;li&gt;Stop button&lt;/li&gt;
      &lt;li&gt;Media Info button&lt;/li&gt;
      &lt;li&gt;Frame by frame button&lt;/li&gt;
      &lt;li&gt;Faster button&lt;/li&gt;
      &lt;li&gt;Slower button&lt;/li&gt;
      &lt;li&gt;Open media button&lt;/li&gt;
      &lt;li&gt;Extended settings button&lt;/li&gt;
      &lt;li&gt;Step forward button&lt;/li&gt;
      &lt;li&gt;Step backward button&lt;/li&gt;
      &lt;li&gt;Quit button&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Create a topbar for non editable buttons
 &lt;img src=&quot;/blog/images/topBar.png&quot; alt=&quot;topBar&quot; /&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;whats-left-to-do&quot;&gt;What’s left to do?&lt;/h3&gt;

&lt;p&gt;Although I completed every task I was assigned, below-mentioned tasks are best suited as a follow-up for my work done:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;If too many widgets come on one side the center buttons don’t remain in the center anymore. This has to be fixed.&lt;/li&gt;
  &lt;li&gt;The design of the Teletext and a few other widgets isn’t final and work needs to be done.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;demo&quot;&gt;Demo&lt;/h2&gt;
&lt;p&gt;Have a look on how the VLC Editor works below:&lt;/p&gt;
&lt;div class=&quot;embed-container&quot;&gt;
  &lt;iframe width=&quot;640&quot; height=&quot;480&quot; src=&quot;https://drive.google.com/file/d/1HChkHipXaNVgkkA8ZMF5IMyHLtQv3N20/preview&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;
  &lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&quot;highlights-and-challenges&quot;&gt;Highlights and Challenges&lt;/h2&gt;

&lt;h3 id=&quot;make-a-generic-player-controlbar&quot;&gt;Make a generic player controlbar&lt;/h3&gt;

&lt;p&gt;The first task was to make a model that had all the button and widget data. Then I had to use that model to populate the player ControlBar. Loaders are quite helpful when you have to load a component in QML.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span class=&quot;n&quot;&gt;Loader&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;id:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myLoader&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;source:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;MyItem.qml&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;After making the buttons model. The next step was to make a QtAbstractListModel to maintain a list of the buttons in current config. This is how the player ControlBar is populated now:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;The model would load the config from VLC Core API.&lt;/li&gt;
  &lt;li&gt;The player controlbar model would then add the respective buttons to the list.&lt;/li&gt;
  &lt;li&gt;The main controlbar would then use this model to get the list and ids which would then load the button from the buttons model.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;make-sure-vlc-is-accessible-via-keyboard&quot;&gt;Make sure VLC is accessible via keyboard&lt;/h3&gt;

&lt;p&gt;One had to make sure that VLC is easily useable via the Keyboard as well. KeyNavigation and Focuscope are the critical things you’ll work with when you are working with Focus.&lt;/p&gt;

&lt;p&gt;With a lot of documentation reading, experimenting, and Pierre’s help, I successfully got the KeyNavigation right.&lt;/p&gt;

&lt;h3 id=&quot;drag-and-drop&quot;&gt;Drag and Drop&lt;/h3&gt;

&lt;p&gt;We all use drag and drop interfaces quite frequently. Making such interfaces made me understand the design and the logic behind it.&lt;/p&gt;

&lt;p&gt;To make an item draggable, you have to set it as a drag target. Similarly, to make it possible to drop a draggable, you need to declare a DropArea.&lt;/p&gt;

&lt;p&gt;I also had to add functionalities like move, insert and delete to the model, because Drag and Drop involve all these actions.&lt;br /&gt;
Have a look at some of the actions below:&lt;br /&gt;
&lt;img src=&quot;/blog/images/DNDDemo.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The next task was to code the cancel and close buttons. The player controlbar should only be updated when the user presses the close button. To implement this, I used signals.&lt;/p&gt;

&lt;p&gt;When you press the close button, the toolbarConfUpdated signal emits, and the playerControlBar is updated.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://doc.qt.io/archives/qt-4.8/signalsandslots.html&quot;&gt;Signals and Slots&lt;/a&gt; are used for communication between objects in Qt. Here’s the signal sent when toolbar is updated:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;toolbarEditor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;QDialog&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Accepted&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;emit&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;toolBarConfUpdated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;hinting-the-user&quot;&gt;Hinting the user&lt;/h3&gt;
&lt;p&gt;For the user to easily use the drag and drop interface, we have to provide some hints.&lt;br /&gt;
When you hover over a draggable item, the cursor changes to an open hand cursor. If you click and hold over it, the cursor changes to a closed hand cursor.&lt;br /&gt;
&lt;img src=&quot;/blog/images/cursorShape.jpg&quot; alt=&quot;&quot; /&gt;&lt;br /&gt;
The cursor changes to ForbiddenCursor if you take the draggable to a place where it’s not possible to drop.&lt;/p&gt;

&lt;h3 id=&quot;profiles&quot;&gt;Profiles&lt;/h3&gt;
&lt;p&gt;Profiles help someone easily save their preferences. For this, I kept the configs of both the player and the mini-player controlbar and split them using a delimiter.
&lt;img src=&quot;/blog/images/profileDemo.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;different-parts-of-the-editor&quot;&gt;Different parts of the Editor&lt;/h3&gt;
&lt;p&gt;One interesting thing about this editor is that it is a mix of QML and Qt/C++. The window, profiles section and action buttons are coded in Qt. The whole drag and drop part is in QML.&lt;/p&gt;

&lt;p&gt;Why use Qt when all can be done in QML? Because:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;qml takes more  ram&lt;/li&gt;
  &lt;li&gt;qml accessibility is hard to get&lt;/li&gt;
  &lt;li&gt;qml is harder to debug, and helps doing some big qml files, which we want to avoid at all cost.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The picture below shows the division.
&lt;img src=&quot;/blog/images/EditorDivision.png&quot; alt=&quot;Alt Text&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;things-i-learned&quot;&gt;Things I learned&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Git
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://fle.github.io/git-tip-keep-your-branch-clean-with-fixup-and-autosquash.html&quot;&gt;Tricks&lt;/a&gt; like fixup and autosquash help a lot in keeping the commits clean.&lt;/li&gt;
      &lt;li&gt;Rebase and reset is quite helpful when you need to edit or rearrange commits.&lt;/li&gt;
      &lt;li&gt;How to work with patches, send emails from git directly.&lt;/li&gt;
      &lt;li&gt;Handling merge conflicts like a pro.&lt;/li&gt;
      &lt;li&gt;How to split commits? A nice trick is if the commit message has bullet points, it can further be split.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Code
    &lt;ul&gt;
      &lt;li&gt;Avoid writing &lt;a href=&quot;https://www.youtube.com/watch?v=-AQfQFcXac8&quot;&gt;over-engineered&lt;/a&gt; code&lt;/li&gt;
      &lt;li&gt;How to work on a huge codebase. Things like Memory leaks, ram consumption, learned how to use the VLC Core API.&lt;/li&gt;
      &lt;li&gt;Design patterns like the &lt;a href=&quot;https://wiki.qt.io/D-Pointer&quot;&gt;D-pointer strategy&lt;/a&gt;  and &lt;a href=&quot;https://doc.qt.io/qt-5/qtquick-modelviewsdata-modelview.html&quot;&gt;Model View Delegate&lt;/a&gt;.&lt;/li&gt;
      &lt;li&gt;Qt/C++, QML and writing production-level code in them.&lt;/li&gt;
      &lt;li&gt;QtCreator, one of the best IDEs I’ve used.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Design
    &lt;ul&gt;
      &lt;li&gt;Learned design concepts like form follows the flow.&lt;/li&gt;
      &lt;li&gt;Prototyping, brainstorming on interactions.&lt;/li&gt;
      &lt;li&gt;Clipping&lt;/li&gt;
      &lt;li&gt;Thinking design solutions keeping the code in mind.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">Introduction This summer, I participated as a Google Summer of Code student under VideoLAN. GSoC is undoubtedly one of the best summer programs out there. From designing interfaces and interactions to writing production-level code, I’ve learned tons of exciting stuff! I was blessed to have great mentors and learned a lot about the open-source community.</summary></entry></feed>